# 基本的bash shell命令

## ls重要命令

```ls
$ls -a			#显示隐藏文件
$ls -C			#按列输出条目
$ls -s			#按文件大小输出文件
$ls	-S			#按文件大小排序
$ls -R			#按递归列出子目录内容
$ls -t			#按文件的修改顺序排序输出
$ls -u			#按文件的修改时间排序输出
$ls -i			#显示文件的索引值
```

### 过滤输出列表

1. `ls 参数 特定文件`，可以查询特定文件的特定情况。
2. `ls 参数 文件名（文件名缺失的一位可以用问号替换）？`，问号可以代表一个字符。
3. `ls 参数 文件名（文件名中缺失的多位可以用星号代替）*`，星号表示零个或多个字符。

## 处理文件

### touch命令

1. `touch 文件名` 创建空白文件，并将你的用户名作为文件的属主。
2. `touch -a 时间（年月日时分）文件名`可以改变文件访问时间。
3. `touch -m 时间 文件名`可以改变文件修改时间。
4. `touch -t 时间 文件名`通过时间戳指定时间。

## 复制文件

### cp命令

cp命令需要两个参数，源对象和目标对象

`cp source destination`

- 当源对象为文件，目标对象为路径时，将目标文件复制到该路径
- 当源对象为文件，目标对象为文件名时，将目标文件复制到当前目录，并为其改名为该文件名。

```cp
-a					#归档文件，保留现有属性
-b					#备份文件
-d					#保留
-f					#强制覆盖已存在的目标文件
-i					#在覆盖目标文件之前提示
-l					#创建文件链接而非复制文件
-p					#如果可能，保留文件属性
-r					#递归地复制文件
-R					#递归地复制目录
-s					#创建一个符号链接而非复制文件
-S					#覆盖默认的备份文件的后缀（默认是~）
-u					#更新目标文件
-v					#详细模式
-x					#仅限于当前系统的复制
```

## 链接文件

链接分为：符号连接（软链接）、硬链接

### 硬链接

硬链接会创建一个独立文件，包含源文件的信息以及位置。引用硬链接文件等同于引用了源文件：

```硬链接
$cp -l 文件名 硬链接名
$ls -il							#使用该命令查看
```

文件和硬链接创建出来的文件索引节点号是相同的，表明是同一个文件。链接计数表明现在两个文件都有两个链接了。

**只能在同种存储媒体上的文件之间创建硬链接，不能在不同挂载点下的文件间创建硬链接。在这种情况下应该使用软链接**

### 软链接

-s参数会创建一个软链接：

```软链接
$cp -s 文件名 新文件名				#创建软链接
$ls -il							#查看差别
```

新创建的文件不要同于老文件的索引节点号，是一个单独的文件。文件变小。链接文件只需要存储源文件信息，并不需要源文件中的数据。

**如果cp命令复制一个链接到另一个源文件的文件，那么复制的其实是源文件的另一个副本。**

### 重命名文件

$mv 文件名 文件名						#改名

$mv 文件名 路径							#移动位置

移动文件会改变文件名，但保持同样的索引节点号和时间戳。移动软链接指向文件会使其失效，但是硬链接不会。

### 删除文件

指令`rm`可以删除文件，一旦删除就无法再通过命令找回。如果删除了软链接指向的源文件，则会导致软链接失效。删除硬链接指向的源文件只会使硬链接少一个索引节点，并不会影响硬链接文件的使用。

``` 删除命令
rm -r				#遍历删除
rm -f				#强制删除
```

# 处理目录

## 创建目录

``` 创建目录
$mkdir 路径名/目录名				#在该路径下建立目录
$mkdir 目录名					 #在当前路径下建立目录
```

## 删除目录

删除目录时很可能会发生一些不好的事情，bash shell会尽可能阻止用户误删目录。删除目录的命令是`rmdir`.

```删除目录
$rmdir 目录名
```

默认情况下，rmdir命令只删除空目录，如果该目录下含有文件则无法删除。

```删除目录
$rmdir --ignore-fail-on-non-empty
```

通过`rm -rf 目录名`可以实现相同的效果。

# 查看文件内容

## 查看文件统计信息

`stat`命令可以提供文件系统上某个文件的所有状态信息。

```统计信息查看
$stat 文件名
```

## 查看文件类型

`file`命令是一个用来查看文件类型的工具，能够探测文件内部并决定文件类型。

```文件类型
$file 文件名
```

file命令将文件分为3类：

1. 文本文件：包含可打印字符的文件
2. 可执行文件：可在系统上运行的文件。
3. 数据文件：包含不可打印二进制字符，又不能在系统上运行的文件。

## 查看整个文件

- `cat`命令

  ```cat
  $cat 文件名
  ```

  可以显示文本内容

  ```cat
  $cat -n 文件名				#给所有的行加上行号
  $cat -b 文件名				#给有文本的行加上行号
  $cat -s 文件名				#将多个空白行压缩到单个空白行
  $cat -T 文件名				#不让制表符出现
  ```

- more命令

- - more命令显示文本内容，但会在每页数据后停下来。
  - 屏幕底部有more标签，说明仍处于more程序中，可以通过输入more命令的提示符控制。

  ```more命令选项
  H									#显示帮助菜单
  spacebar							#显示文件文本的下一屏
  z									#显示文件文本的下一屏
  ENTER								#显示文件的下一行
  d									#显示文件文本的后面半屏
  q									#退出程序
  s									#显示文件文本的下一行
  f									#显示下一屏文件文本
  b									#显示上一屏文件文本
  /expression							#在文件中查找匹配文本表达式的内容
  n									#在文件中查找下一处匹配已指定表达式的内容
  '									#跳到指定表达式匹配到的第一处内容
  !cmd								#执行shell命令
  v									#在当前行启动vi编辑器
  CTRL-L								#重绘当前屏
  =									#显示当前行在文件中的行号
  .									#重复执行前一个命令
  ```

- less命令

- - less命令显示文件内容，但不用读取整个文件（在读取大型文件时很有优势）。
  - less命令支持more命令的所有参数，还多了一些其他的选项。
  - 具体选项命令可以查看less的命令手册。

## 查看部分文件

- tail命令

- - tail命令可以显示文件末尾部分的内容，默认显示文件的末尾10行。
  - 可以通过参数来指定显示的行数。

  ```tail命令行参数
  -c bytes					#显示文件最后的bytes个字节的字符
  -n line						#显示文件最后的lines行
  -f							#让tail程序一直保持活动状态，如果有新内容加到文件末尾就显示出来
  --pid=PID					#和-f参数一起，跟踪一个文件直到进程ID为PID的进程结束
  -s sec						#和-f参数一起，在每次循环输出之间休眠sec秒
  -v							#总是显示带文件名的头
  -q							#从不显示带文件名的头
  ```

  -f参数是tail命令的一个突出的特性，它允许你在其它进程使用该文件时查看文件的内容。tail命令会保持活动状态并不断显示添加到文件中的内容，可以实时监测系统日志。

- head命令

- - 显示文件开头内容，默认十行。
  - 可以使用-c、-n参数。
  - 无法使用-f相关参数。